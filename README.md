# Сайт фальклорнага гурта Варган

### Наладка лакальнага асяроддзя для распрацоўкі

Гэтае правадніцтва асвятляе працэс наладкі праекта ў асяроддзі GNU/Linux. У іншых АС наладка не праводзілася. Праект выкарыстоўвае платформу [docker](https://www.docker.com/why-docker). Тэарэтычна, усе АС, што падтрымліваюць docker, могуць пасаваць для распрацоўкі дадзенага сайта. 

Усталяванне docker'а тут не асвятляецца, калі ласка, звяртайцеся да [афіцыйнай дакументацыі](https://docs.docker.com/). Да прыкладу, для Ubuntu працэс усталявання Docker Community Edition (CE) апісаны [тут](https://docs.docker.com/install/linux/docker-ce/ubuntu/). Таксама неабходна ўсталяваць дапаможны дадатак ```docker-compose``` (як звычайны пакунак GNU/Linux з рэпазіторыя apt, dnf і г.д.).

Далей мяркуецца, што на Вашым кампутары паспяхова выконваецца загад ```docker run hello-world``` і дае непусты вынік загад ```which docker-compose```.

### Токен для ўсталявання composer-пакункаў з github

Токен (сімвальны код) мусіць быць запісаны ў файл ```.env``` у корані праекта. Знак кропкі на пачатку імя азначае для UNIX-сістэмы, што файл схаваны. Зрабіце копію файла ```.env.dist``` з назваю ```.env```. У тэкставым рэдактары ў файле ```.env``` прапішыце свой уласны токен пасля знака ```=``` без прабелаў.

Калі ў Вас няма яшчэ github токену і патрэбная дапамога з яго генерацыяй, то глядзіце правадніцтва [тут](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/). Заўважце, што для праекта дастаткова адзначыць правы доступу з групы ```repo```.

### Лакальныя файлы канфігурацыі вэб-дадатка

Шэраг файлаў не індэксуюцца сістэмаю кантроля версій (git'ам) і мусяць быць створаныя лакальна. Як і ў выпадку з ```.env``` файлам яны маюць пашырэнне ```.dist``` і месцяцца ў тэчцы ```configs```.

Адкрыўшы тэчку ```configs```, проста зрабіце ўнутры яе копіі файлаў ```env.php.dist``` і ```env-local-assets.php.dist``` без пашырэнняў ```.dist``` &mdash; адпаведна ```env.php``` і ```env-local-assets.php```. Копію файла ```env-local-db.php.dist``` рабіць ня трэба.

### Запуск docker-асяроддзя

Адкрыўшы корань праекта (дзе месцяцца файлы ```docker-compose.yml``` і ```.env```), выканайце загад ```docker-compose up```. Гэтая каманда запускае ўсё неабходнае для функцыянавання сайта. Першы запуск будзе доўгім і спампуе шмат інфармацыі з інтэрнэту. Далейшыя запускі ня будуць патрабаваць злучэння з інтэрнэтам і ня будуць займаць шмат часу.

У кансолі пры першым запуску будзе выводзіцца шмат інфармацыі пра ўсталяванне пакункаў ды капіяванне файлаў. Калі запампоўка і наладка завяршаецца, кансоль застаецца занятай працэссам ```docker-compose```, які адлюстроўвае лог далучэнняў да сайта &mdash; гэта і ёсць працоўны рэжым. Для спынення працэса трэба даць каманду з клавіятуры ```Ctrl+c```.

Такім чынам, загад ```docker-compose up``` запускае ўсе патрэбныя працэсы для функцыянавання сайта.

Сайт мусіць быць даступны праз адрас ```localhost:8080```

### Ініцыялізацыя базы даных

Гэты крок патрэбны толькі пасля першага запуску ```docker-compose up``` &mdash; калі толькі ствараюцца вобразы і кантэйнеры docker.

Пры запушчаным ```docker-compose```, у іншай кансолі з каранёвай тэчкі выканайце загад ```./setup```. Выконваюцца міграцыі табліц базы даных CMS і адмінкі, імпартуюцца шаблоны і блокі, cтвараецца адміністратарскі ўліковы запіс:

**E-mail**: admin@admin.com  
**Пароль**: admin

Уваход у адмінку: ```localhost:8080/admin```

### Распрацоўка

Сайт працуе на [PHP](https://php.net), [LUYA](https://luya.io) і [Yii2](https://yiiframework.com).  
Для распрацоўкі неабходнае валоданне гэтымі тэхналогіямі, і, вядома, HTML/CSS(SASS)/JavaScript.

